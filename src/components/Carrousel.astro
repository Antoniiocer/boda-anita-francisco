<section class="flex items-center justify-center gap-4" data-carousel>
  <button class="text-secondary text-5xl md:text-6xl" data-prev>‹</button>

  <div class="relative overflow-hidden w-full max-w-5xl">
    <div class="flex transition-transform duration-700 ease-out" data-track>
      <img src="/images/carrousel/1.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
      <img src="/images/carrousel/4.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
      <img src="/images/carrousel/5.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
      <img src="/images/carrousel/6.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
      <img src="/images/carrousel/7.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
      <img src="/images/carrousel/8.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2 object-center" />
      <img src="/images/carrousel/10.jpeg" alt="" class="w-full md:w-1/3 shrink-0 object-cover rounded-2xl px-2" />
    </div>
  </div>

  <button class="text-secondary text-5xl md:text-6xl" data-next>›</button>
</section>


<script>
  const carousel = document.querySelector('[data-carousel]')
  const track = carousel.querySelector('[data-track]')
  const slides = track.children
  const prev = carousel.querySelector('[data-prev]')
  const next = carousel.querySelector('[data-next]')

  let index = 0
  let intervalId = null

  const getVisible = () => window.innerWidth < 768 ? 1 : 3

  const update = () => {
    const visible = getVisible()
    const maxIndex = slides.length - visible

    if (index < 0) index = maxIndex
    if (index > maxIndex) index = 0

    track.style.transform = `translateX(-${index * (100 / visible)}%)`
  }

  const goNext = () => {
    index++
    update()
  }

  const goPrev = () => {
    index--
    update()
  }

  prev.addEventListener('click', () => {
    goPrev()
    restartAuto()
  })

  next.addEventListener('click', () => {
    goNext()
    restartAuto()
  })

  const startAuto = () => {
    intervalId = setInterval(goNext, 3000)
  }

  const restartAuto = () => {
    clearInterval(intervalId)
    startAuto()
  }

  window.addEventListener('resize', update)

  update()
  startAuto()
</script>



